{% extends 'base.html' %}
{% block content %}
<center xmlns="http://www.w3.org/1999/html" class="my-3"><h1 style="color:white;">Account Overview</h1></center>

<div class="card my-5">
  <img id="ppic" src="/static/Default.jpg" alt="YourPic" class="my-2">
  <h1>{{ current_user.name }}</h1>
  <p class="title">{{ current_user.email }}</p>
  <p>2FA enabled: {{ current_user.two_FA }}</p>
  <div class="my-3">
  <button onclick="location.href = '/forgot-pass';" type="submit" id = "pass_change" class="btn btn-primary">Change password</button>
  </div>
  <div>
  {% if current_user.two_FA == 0 %}
    <button onclick="location.href = '/two-FA';" type="submit" id = "s_ubmit" class="btn btn-primary">Enable 2FA</button>
  {% else %}
    <button onclick="location.href = '/disable2FA';" type="submit" id = "disable" class="btn btn-primary">Disable 2FA</button>
  {% endif %}
  </div>
  <div class="accordion" id="accordionExample">
  <div class="accordion-item">
    <h2 class="accordion-header" id="headingOne">
      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
        How does 2FA work?
      </button>
    </h2>
    <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
      <div class="accordion-body">
        <strong>2-Factor Authentication overview</strong><br>  Every time you log-in to your account, a six digit random
        otp will be sent to your registered email address: <code>{{ current_user.email }}</code>. This will add an extra
        layer of security to your account. Click the above link <code>'Enable 2FA'</code> to turn on 2-Factor Authentication.
        For any query, send us a <a href="/feedback">feedback</a> or report a bug
        <a href="https://forms.gle/FBG28Sw3HDgLtksF8">Here</a>
      </div>
    </div>
  </div>
  </div>
  <div class="container my-3">
  {% with messages = get_flashed_messages(with_categories=true) %}
   {% if messages %}
         {% for category, message in messages %}
              {% if category == 'error' %}
                  <div class="alert alert-danger" role="alert">
                  {{ message }}
                  </div>
              {% else %}
                  <div class="alert alert-success" role="alert">
                  {{ message }}
                  </div>
              {% endif %}
         {% endfor %}
   {% endif %}
  {% endwith %}
  </div>
</div>
<style>
    .card {
      box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
      max-width: 450px;
      margin: auto;
      text-align: center;
    }

    .title {
      color: grey;
      font-size: 18px;
    }

    button {
      border: none;
      outline: 0;
      display: inline-block;
      padding: 8px;
      color: white;
      background-color: #000;
      text-align: center;
      cursor: pointer;
      width: 95%;
      font-size: 18px;
    }

    #ppic {
      border-radius: 50%;
      display: block;
      margin-left: auto;
      margin-right: auto;
      width: 50%;
    }
</style>

{% endblock content %}